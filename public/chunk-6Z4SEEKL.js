import{A as rr,B as $e,E as le,Fa as sr,Ga as kt,H as At,I as He,J as Q,N as ir,R as F,Ta as or,Xa as ar,a as J,b as Y,d as X,e as u,f as Z,h as Yn,i as Xn,j as Tt,k as wt,l as bt,n as Zn,o as Qn,p as er,q as tr,t as ue,v as Ve,w as nr,x as E,y as We}from"./chunk-EBDJBKSB.js";var cr=()=>{};var dr=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ts=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,a=i+2<n.length,l=a?n[i+2]:0,h=s>>2,p=(s&3)<<4|c>>4,d=(c&15)<<2|l>>6,m=l&63;a||(m=64,o||(d=64)),r.push(t[h],t[p],t[d],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dr(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ts(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||l==null||p==null)throw new Rt;let d=s<<2|c>>4;if(r.push(d),l!==64){let m=c<<4&240|l>>2;if(r.push(m),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Rt=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ns=function(n){let e=dr(n);return Be.encodeByteArray(e,!0)},Pt=function(n){return ns(n).replace(/\./g,"")},je=function(n){try{return Be.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hr(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var rs=()=>hr().__FIREBASE_DEFAULTS__,is=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ss=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&je(n[1]);return e&&JSON.parse(e)},Ot=()=>{try{return cr()||rs()||is()||ss()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fr=n=>{var e,t;return(t=(e=Ot())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]};var Nt=()=>{var n;return(n=Ot())===null||n===void 0?void 0:n.config},Dt=n=>{var e;return(e=Ot())===null||e===void 0?void 0:e[`_${n}`]};var ee=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Te(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function pr(n){return u(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}var ye={};function os(){let n={prod:[],emulator:[]};for(let e of Object.keys(ye))ye[e]?n.emulator.push(e):n.prod.push(e);return n}function as(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var ur=!1;function mr(n,e){if(typeof window>"u"||typeof document>"u"||!Te(window.location.host)||ye[n]===e||ye[n]||ur)return;ye[n]=e;function t(d){return`__firebase__banner__${d}`}let r="__firebase__banner",s=os().prod.length>0;function o(){let d=document.getElementById(r);d&&d.remove()}function c(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function a(d,m){d.setAttribute("width","24"),d.setAttribute("id",m),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function l(){let d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{ur=!0,o()},d}function h(d,m){d.setAttribute("id",m),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function p(){let d=as(r),m=t("text"),w=document.getElementById(m)||document.createElement("span"),ve=t("learnmore"),ce=document.getElementById(ve)||document.createElement("a"),Ee=t("preprendIcon"),G=document.getElementById(Ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){let K=d.element;c(K),h(ce,ve);let Fe=l();a(G,Ee),K.append(G,w,ce,Fe),document.body.appendChild(K)}s?(w.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function I(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gr(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(I())}function _r(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ir(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function vr(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Er(){let n=I();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ze(){try{return typeof indexedDB=="object"}catch{return!1}}function yr(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var cs="FirebaseError",b=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=cs,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A.prototype.create)}},A=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?us(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new b(i,c,r)}};function us(n,e){return n.replace(ls,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var ls=/\{\$([^}]+)}/g;function Tr(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function V(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(lr(s)&&lr(o)){if(!V(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function lr(n){return n!==null&&typeof n=="object"}function we(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function de(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function he(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function wr(n,e){let t=new Ct(n,e);return t.subscribe.bind(t)}var Ct=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ds(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=St),i.error===void 0&&(i.error=St),i.complete===void 0&&(i.complete=St);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ds(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function St(){}var Nu=14400*1e3;function y(n){return n&&n._delegate?n._delegate:n}var v=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var te="[DEFAULT]";var Lt=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ee;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fs(e))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=te){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return u(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=te){return this.instances.has(e)}getOptions(e=te){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hs(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=te){return this.component?this.component.multipleInstances?e:te:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hs(n){return n===te?void 0:n}function fs(n){return n.instantiationMode==="EAGER"}var qe=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Lt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var ps=[],g=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(g||{}),ms={debug:g.DEBUG,verbose:g.VERBOSE,info:g.INFO,warn:g.WARN,error:g.ERROR,silent:g.SILENT},gs=g.INFO,_s={[g.DEBUG]:"log",[g.VERBOSE]:"log",[g.INFO]:"info",[g.WARN]:"warn",[g.ERROR]:"error"},Is=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=_s[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},W=class{constructor(e){this.name=e,this._logLevel=gs,this._logHandler=Is,this._userLogHandler=null,ps.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in g))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ms[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,g.DEBUG,...e),this._logHandler(this,g.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,g.VERBOSE,...e),this._logHandler(this,g.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,g.INFO,...e),this._logHandler(this,g.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,g.WARN,...e),this._logHandler(this,g.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,g.ERROR,...e),this._logHandler(this,g.ERROR,...e)}};var vs=(n,e)=>e.some(t=>n instanceof t),br,Ar;function Es(){return br||(br=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ys(){return Ar||(Ar=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var kr=new WeakMap,Ut=new WeakMap,Sr=new WeakMap,Mt=new WeakMap,Ft=new WeakMap;function Ts(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(R(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&kr.set(t,n)}).catch(()=>{}),Ft.set(e,n),e}function ws(n){if(Ut.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ut.set(n,e)}var xt={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ut.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Sr.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return R(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Rr(n){xt=n(xt)}function bs(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Ge(this),e,...t);return Sr.set(r,e.sort?e.sort():[e]),R(r)}:ys().includes(n)?function(...e){return n.apply(Ge(this),e),R(kr.get(this))}:function(...e){return R(n.apply(Ge(this),e))}}function As(n){return typeof n=="function"?bs(n):(n instanceof IDBTransaction&&ws(n),vs(n,Es())?new Proxy(n,xt):n)}function R(n){if(n instanceof IDBRequest)return Ts(n);if(Mt.has(n))return Mt.get(n);let e=As(n);return e!==n&&(Mt.set(n,e),Ft.set(e,n)),e}var Ge=n=>Ft.get(n);function Pr(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=R(o);return r&&o.addEventListener("upgradeneeded",a=>{r(R(o.result),a.oldVersion,a.newVersion,R(o.transaction),a)}),t&&o.addEventListener("blocked",a=>t(a.oldVersion,a.newVersion,a)),c.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var ks=["get","getKey","getAll","getAllKeys","count"],Ss=["put","add","delete","clear"],Vt=new Map;function Cr(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vt.get(e))return Vt.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Ss.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ks.includes(t)))return;let s=function(o,...c){return u(this,null,function*(){let a=this.transaction(o,i?"readwrite":"readonly"),l=a.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&a.done]))[0]})};return Vt.set(e,s),s}Rr(n=>Y(J({},n),{get:(e,t,r)=>Cr(e,t)||n.get(e,t,r),has:(e,t)=>!!Cr(e,t)||n.has(e,t)}));var $t=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Rs(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Rs(n){let e=n.getComponent();return e?.type==="VERSION"}var Ht="@firebase/app",Or="0.13.2";var N=new W("@firebase/app"),Cs="@firebase/app-compat",Ps="@firebase/analytics-compat",Os="@firebase/analytics",Ns="@firebase/app-check-compat",Ds="@firebase/app-check",Ls="@firebase/auth",Ms="@firebase/auth-compat",Us="@firebase/database",xs="@firebase/data-connect",Fs="@firebase/database-compat",Vs="@firebase/functions",Ws="@firebase/functions-compat",$s="@firebase/installations",Hs="@firebase/installations-compat",Bs="@firebase/messaging",js="@firebase/messaging-compat",zs="@firebase/performance",qs="@firebase/performance-compat",Gs="@firebase/remote-config",Ks="@firebase/remote-config-compat",Js="@firebase/storage",Ys="@firebase/storage-compat",Xs="@firebase/firestore",Zs="@firebase/ai",Qs="@firebase/firestore-compat",eo="firebase",to="11.10.0";var Bt="[DEFAULT]",no={[Ht]:"fire-core",[Cs]:"fire-core-compat",[Os]:"fire-analytics",[Ps]:"fire-analytics-compat",[Ds]:"fire-app-check",[Ns]:"fire-app-check-compat",[Ls]:"fire-auth",[Ms]:"fire-auth-compat",[Us]:"fire-rtdb",[xs]:"fire-data-connect",[Fs]:"fire-rtdb-compat",[Vs]:"fire-fn",[Ws]:"fire-fn-compat",[$s]:"fire-iid",[Hs]:"fire-iid-compat",[Bs]:"fire-fcm",[js]:"fire-fcm-compat",[zs]:"fire-perf",[qs]:"fire-perf-compat",[Gs]:"fire-rc",[Ks]:"fire-rc-compat",[Js]:"fire-gcs",[Ys]:"fire-gcs-compat",[Xs]:"fire-fst",[Qs]:"fire-fst-compat",[Zs]:"fire-vertex","fire-js":"fire-js",[eo]:"fire-js-all"};var be=new Map,ro=new Map,jt=new Map;function Nr(n,e){try{n.container.addComponent(e)}catch(t){N.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function D(n){let e=n.name;if(jt.has(e))return N.debug(`There were multiple attempts to register component ${e}.`),!1;jt.set(e,n);for(let t of be.values())Nr(t,n);for(let t of ro.values())Nr(t,n);return!0}function Ke(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function T(n){return n==null?!1:n.settings!==void 0}var io={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$=new A("app","Firebase",io);var zt=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new v("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $.create("app-deleted",{appName:this._name})}};var fe=to;function Kt(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Bt,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw $.create("bad-app-name",{appName:String(i)});if(t||(t=Nt()),!t)throw $.create("no-options");let s=be.get(i);if(s){if(V(t,s.options)&&V(r,s.config))return s;throw $.create("duplicate-app",{appName:i})}let o=new qe(i);for(let a of jt.values())o.addComponent(a);let c=new zt(t,r,o);return be.set(i,c),c}function ke(n=Bt){let e=be.get(n);if(!e&&n===Bt&&Nt())return Kt();if(!e)throw $.create("no-app",{appName:n});return e}function Je(){return Array.from(be.values())}function _(n,e,t){var r;let i=(r=no[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),N.warn(c.join(" "));return}D(new v(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var so="firebase-heartbeat-database",oo=1,Ae="firebase-heartbeat-store",Wt=null;function Ur(){return Wt||(Wt=Pr(so,oo,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ae)}catch(t){console.warn(t)}}}}).catch(n=>{throw $.create("idb-open",{originalErrorMessage:n.message})})),Wt}function ao(n){return u(this,null,function*(){try{let t=(yield Ur()).transaction(Ae),r=yield t.objectStore(Ae).get(xr(n));return yield t.done,r}catch(e){if(e instanceof b)N.warn(e.message);else{let t=$.create("idb-get",{originalErrorMessage:e?.message});N.warn(t.message)}}})}function Dr(n,e){return u(this,null,function*(){try{let r=(yield Ur()).transaction(Ae,"readwrite");yield r.objectStore(Ae).put(e,xr(n)),yield r.done}catch(t){if(t instanceof b)N.warn(t.message);else{let r=$.create("idb-set",{originalErrorMessage:t?.message});N.warn(r.message)}}})}function xr(n){return`${n.name}!${n.options.appId}`}var co=1024,uo=30,qt=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Gt(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return u(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Lr();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>uo){let o=ho(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){N.warn(r)}})}getHeartbeatsHeader(){return u(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Lr(),{heartbeatsToSend:r,unsentEntries:i}=lo(this._heartbeatsCache.heartbeats),s=Pt(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return N.warn(t),""}})}};function Lr(){return new Date().toISOString().substring(0,10)}function lo(n,e=co){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Mr(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Mr(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Gt=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return u(this,null,function*(){return ze()?yr().then(()=>!0).catch(()=>!1):!1})}read(){return u(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield ao(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return u(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Dr(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return u(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Dr(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Mr(n){return Pt(JSON.stringify({version:2,heartbeats:n})).length}function ho(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function fo(n){D(new v("platform-logger",e=>new $t(e),"PRIVATE")),D(new v("heartbeat",e=>new qt(e),"PRIVATE")),_(Ht,Or,n),_(Ht,Or,"esm2017"),_("fire-js","")}fo("");var po="firebase",mo="11.10.0";_(po,mo,"app");function Fr(n){n===void 0&&(n=E(le));let e=n.get(He);return t=>new Z(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let c=t.subscribe({next:a=>{r.next(a),o()},complete:()=>{r.complete(),o()},error:a=>{r.error(a),o()}});return c.add(()=>{r.unsubscribe(),o()}),c})}var me=new er("ANGULARFIRE2_VERSION");function Jt(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Xe=(n,e)=>{let t=e?[e]:Je(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},pe=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(pe||{}),Vr=kt()&&typeof Zone<"u"?pe.WARN:pe.SILENT;var Ye=class{zone;delegate;constructor(e,t=Xn){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},ge=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=E(F);this.outsideAngular=t.runOutsideAngular(()=>new Ye(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Ye(typeof Zone>"u"?void 0:Zone.current,Yn))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wr=!1;function go(n,e){!Wr&&(Vr>pe.SILENT||kt())&&(Wr=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Vr>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function _o(n){let e=E(F,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ne(n){let e=E(F,{optional:!0});return e?e.run(()=>n()):n()}var Io=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),$e(t,()=>ne(()=>n.apply(void 0,r)))),k=(n,e,t)=>(t||=e?pe.WARN:pe.VERBOSE,function(){let r,i=arguments,s,o,c;try{s=E(ge),o=E(He),c=E(rr)}catch{return go(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ne(()=>o.add())),i[l]=Io(i[l],r,c));let a=_o(()=>n.apply(this,i));return e?a instanceof Z?a.pipe(bt(s.outsideAngular),wt(s.insideAngular),Fr(c)):a instanceof Promise?ne(()=>{let l=o.add();return new Promise((h,p)=>{a.then(d=>$e(c,()=>ne(()=>h(d))),d=>$e(c,()=>ne(()=>p(d)))).finally(l)})}):typeof a=="function"&&r?function(){return setTimeout(r,0),a.apply(this,arguments)}:ne(()=>a):a instanceof Z?a.pipe(bt(s.outsideAngular),wt(s.insideAngular)):ne(()=>a)});var re=class{constructor(e){return e}},Se=class{constructor(){return Je()}};function vo(n){return n&&n.length===1?n[0]:new re(ke())}var Yt=new Ve("angularfire2._apps"),Eo={provide:re,useFactory:vo,deps:[[new Q,Yt]]},yo={provide:Se,deps:[[new Q,Yt]]};function To(n){return(e,t)=>{let r=t.get(ir);_("angularfire",me.full,"core"),_("angularfire",me.full,"app"),_("angular",tr.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new re(i)}}function Cl(n,...e){return We([Eo,yo,{provide:Yt,useFactory:To(n),multi:!0,deps:[F,le,ge,...e]}])}var Pl=k(Kt,!0);var wo=new Map,bo={activated:!1,tokenObservers:[]},Ao={initialized:!1,enabled:!1};function S(n){return wo.get(n)||Object.assign({},bo)}function zr(){return Ao}var ko="https://content-firebaseappcheck.googleapis.com/v1";var So="exchangeDebugToken",Hr={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Vl=1440*60*1e3;var Qt=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return u(this,null,function*(){this.stop();try{this.pending=new ee,this.pending.promise.catch(t=>{}),yield Ro(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ee,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Ro(n){return new Promise(e=>{setTimeout(e,n)})}var Co={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},H=new A("appCheck","AppCheck",Co);function qr(n){if(!S(n).activated)throw H.create("use-before-activation",{appName:n.name})}function Gr(r,i){return u(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let c={method:"POST",body:JSON.stringify(e),headers:s},a;try{a=yield fetch(n,c)}catch(m){throw H.create("fetch-network-error",{originalErrorMessage:m?.message})}if(a.status!==200)throw H.create("fetch-status-error",{httpStatus:a.status});let l;try{l=yield a.json()}catch(m){throw H.create("fetch-parse-error",{originalErrorMessage:m?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw H.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,d=Date.now();return{token:l.token,expireTimeMillis:d+p,issuedAtTimeMillis:d}})}function Kr(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${ko}/projects/${t}/apps/${r}:${So}?key=${i}`,body:{debug_token:e}}}var Po="firebase-app-check-database",Oo=1,en="firebase-app-check-store";var Ze=null;function No(){return Ze||(Ze=new Promise((n,e)=>{try{let t=indexedDB.open(Po,Oo);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(H.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(en,{keyPath:"compositeKey"})}}}catch(t){e(H.create("storage-open",{originalErrorMessage:t?.message}))}}),Ze)}function Do(n,e){return Lo(Mo(n),e)}function Lo(n,e){return u(this,null,function*(){let r=(yield No()).transaction(en,"readwrite"),s=r.objectStore(en).put({compositeKey:n,value:e});return new Promise((o,c)=>{s.onsuccess=a=>{o()},r.onerror=a=>{var l;c(H.create("storage-set",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})})}function Mo(n){return`${n.options.appId}-${n.name}`}var Re=new W("@firebase/app-check");function Xt(n,e){return ze()?Do(n,e).catch(t=>{Re.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Jr(){return zr().enabled}function Yr(){return u(this,null,function*(){let n=zr();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Uo={error:"UNKNOWN_ERROR"};function xo(n){return Be.encodeString(JSON.stringify(n),!1)}function tn(n,e=!1,t=!1){return u(this,null,function*(){let r=n.app;qr(r);let i=S(r),s=i.token,o;if(s&&!Ce(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(Ce(l)?s=l:yield Xt(r,void 0))}if(!e&&s&&Ce(s))return{token:s.token};let c=!1;if(Jr())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Gr(Kr(r,yield Yr()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield Xt(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Re.warn(l.message):t&&Re.error(l),Zt(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),s=yield S(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Re.warn(l.message):t&&Re.error(l),o=l}let a;return s?o?Ce(s)?a={token:s.token,internalError:o}:a=Zt(o):(a={token:s.token},i.token=s,yield Xt(r,s)):a=Zt(o),c&&$o(r,a),a})}function Fo(n){return u(this,null,function*(){let e=n.app;qr(e);let{provider:t}=S(e);if(Jr()){let r=yield Yr(),{token:i}=yield Gr(Kr(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Vo(n,e,t,r){let{app:i}=n,s=S(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Ce(s.token)){let c=s.token;Promise.resolve().then(()=>{t({token:c.token}),Br(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Br(n))}function Xr(n,e){let t=S(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Br(n){let{app:e}=n,t=S(e),r=t.tokenRefresher;r||(r=Wo(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Wo(n){let{app:e}=n;return new Qt(()=>u(null,null,function*(){let t=S(e),r;if(t.token?r=yield tn(n,!0):r=yield tn(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=S(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Hr.RETRIAL_MIN_WAIT,Hr.RETRIAL_MAX_WAIT)}function $o(n,e){let t=S(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ce(n){return n.expireTimeMillis-Date.now()>0}function Zt(n){return{token:xo(Uo),error:n}}var nn=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=S(this.app);for(let t of e)Xr(this.app,t.next);return Promise.resolve()}};function Ho(n,e){return new nn(n,e)}function Bo(n){return{getToken:e=>tn(n,e),getLimitedUseToken:()=>Fo(n),addTokenListener:e=>Vo(n,"INTERNAL",e),removeTokenListener:e=>Xr(n.app,e)}}var jo="@firebase/app-check",zo="0.10.1";var qo="app-check",jr="app-check-internal";function Go(){D(new v(qo,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Ho(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jr).initialize()})),D(new v(jr,n=>{let e=n.getProvider("app-check").getImmediate();return Bo(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),_(jo,zo)}Go();var Ko="app-check";var Qe=class{constructor(){return Xe(Ko)}};var Jo=["localhost","0.0.0.0","127.0.0.1"],Zl=typeof window<"u"&&Jo.includes(window.location.hostname);function fi(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var pi=fi,mi=new A("auth","Firebase",fi());var st=new W("@firebase/auth");function Yo(n,...e){st.logLevel<=g.WARN&&st.warn(`Auth (${fe}): ${n}`,...e)}function tt(n,...e){st.logLevel<=g.ERROR&&st.error(`Auth (${fe}): ${n}`,...e)}function P(n,...e){throw Sn(n,...e)}function ie(n,...e){return Sn(n,...e)}function gi(n,e,t){let r=Object.assign(Object.assign({},pi()),{[e]:t});return new A("auth","Firebase",r).create(e,{appName:n.name})}function U(n){return gi(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sn(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return mi.create(n,...e)}function f(n,e,...t){if(!n)throw Sn(e,...t)}function L(n){let e="INTERNAL ASSERTION FAILED: "+n;throw tt(e),new Error(e)}function z(n,e){n||L(e)}function an(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Xo(){return Zr()==="http:"||Zr()==="https:"}function Zr(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Zo(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xo()||Ir()||"connection"in navigator)?navigator.onLine:!0}function Qo(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var se=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,z(t>e,"Short delay should be less than long delay!"),this.isMobile=gr()||vr()}get(){return Zo()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Rn(n,e){z(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ot=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;L("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;L("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;L("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ea={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var ta=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],na=new se(3e4,6e4);function x(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function O(s,o,c,a){return u(this,arguments,function*(n,e,t,r,i={}){return _i(n,i,()=>u(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=we(Object.assign({key:n.config.apiKey},h)).slice(1),d=yield n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:d},l);return _r()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Te(n.emulatorConfig.host)&&(m.credentials="include"),ot.fetch()(yield Ii(n,n.config.apiHost,t,p),m)}))})}function _i(n,e,t){return u(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},ea),e);try{let i=new cn(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw et(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[a,l]=c.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw et(n,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw et(n,"email-already-in-use",o);if(a==="USER_DISABLED")throw et(n,"user-disabled",o);let h=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw gi(n,h,l);P(n,h)}}catch(i){if(i instanceof b)throw i;P(n,"network-request-failed",{message:String(i)})}})}function xe(s,o,c,a){return u(this,arguments,function*(n,e,t,r,i={}){let l=yield O(n,e,t,r,i);return"mfaPendingCredential"in l&&P(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function Ii(n,e,t,r){return u(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Rn(n.config,i):`${n.config.apiScheme}://${i}`;return ta.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function ra(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var cn=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ie(this.auth,"network-request-failed")),na.get())})}};function et(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ie(n,e,r);return i.customData._tokenResponse=t,i}function Qr(n){return n!==void 0&&n.enterprise!==void 0}var un=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ra(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function ia(n,e){return u(this,null,function*(){return O(n,"GET","/v2/recaptchaConfig",x(n,e))})}function sa(n,e){return u(this,null,function*(){return O(n,"POST","/v1/accounts:delete",e)})}function at(n,e){return u(this,null,function*(){return O(n,"POST","/v1/accounts:lookup",e)})}function Oe(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Cn(n,e=!1){return u(this,null,function*(){let t=y(n),r=yield t.getIdToken(e),i=Pn(r);f(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Oe(rn(i.auth_time)),issuedAtTime:Oe(rn(i.iat)),expirationTime:Oe(rn(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function rn(n){return Number(n)*1e3}function Pn(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return tt("JWT malformed, contained fewer than 3 sections"),null;try{let i=je(t);return i?JSON.parse(i):(tt("Failed to decode base64 JWT payload"),null)}catch(i){return tt("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ei(n){let e=Pn(n);return f(e,"internal-error"),f(typeof e.exp<"u","internal-error"),f(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function _e(n,e,t=!1){return u(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof b&&oa(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function oa({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ln=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>u(this,null,function*(){yield this.iteration()}),t)}iteration(){return u(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var De=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oe(this.lastLoginAt),this.creationTime=Oe(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ct(n){return u(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield _e(n,at(t,{idToken:r}));f(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?vi(s.providerUserInfo):[],c=aa(n.providerData,o),a=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!c?.length,h=a?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new De(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function On(n){return u(this,null,function*(){let e=y(n);yield ct(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function aa(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vi(n){return n.map(e=>{var{providerId:t}=e,r=Tt(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function ca(n,e){return u(this,null,function*(){let t=yield _i(n,{},()=>u(null,null,function*(){let r=we({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield Ii(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let a={method:"POST",headers:c,body:r};return n.emulatorConfig&&Te(n.emulatorConfig.host)&&(a.credentials="include"),ot.fetch()(o,a)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function ua(n,e){return u(this,null,function*(){return O(n,"POST","/v2/accounts:revokeToken",x(n,e))})}var Ne=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){f(e.idToken,"internal-error"),f(typeof e.idToken<"u","internal-error"),f(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ei(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){f(e.length!==0,"internal-error");let t=ei(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return u(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(f(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return u(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield ca(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(f(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(f(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(f(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return L("not implemented")}};function B(n,e){f(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var j=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Tt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ln(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new De(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return u(this,null,function*(){let t=yield _e(this,this.stsTokenManager.getToken(this.auth,e));return f(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Cn(this,e)}reload(){return On(this)}_assign(e){this!==e&&(f(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){f(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return u(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ct(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return u(this,null,function*(){if(T(this.auth.app))return Promise.reject(U(this.auth));let e=yield this.getIdToken();return yield _e(this,sa(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,a,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,d=(i=t.email)!==null&&i!==void 0?i:void 0,m=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,ve=(c=t.tenantId)!==null&&c!==void 0?c:void 0,ce=(a=t._redirectEventId)!==null&&a!==void 0?a:void 0,Ee=(l=t.createdAt)!==null&&l!==void 0?l:void 0,G=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:Fe,isAnonymous:Kn,providerData:Et,stsTokenManager:Jn}=t;f(K&&Jn,e,"internal-error");let Qi=Ne.fromJSON(this.name,Jn);f(typeof K=="string",e,"internal-error"),B(p,e.name),B(d,e.name),f(typeof Fe=="boolean",e,"internal-error"),f(typeof Kn=="boolean",e,"internal-error"),B(m,e.name),B(w,e.name),B(ve,e.name),B(ce,e.name),B(Ee,e.name),B(G,e.name);let yt=new n({uid:K,auth:e,email:d,emailVerified:Fe,displayName:p,isAnonymous:Kn,photoURL:w,phoneNumber:m,tenantId:ve,stsTokenManager:Qi,createdAt:Ee,lastLoginAt:G});return Et&&Array.isArray(Et)&&(yt.providerData=Et.map(es=>Object.assign({},es))),ce&&(yt._redirectEventId=ce),yt}static _fromIdTokenResponse(e,t,r=!1){return u(this,null,function*(){let i=new Ne;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ct(s),s})}static _fromGetAccountInfoResponse(e,t,r){return u(this,null,function*(){let i=t.users[0];f(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?vi(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Ne;c.updateFromIdToken(r);let a=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new De(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(a,l),a})}};var ti=new Map;function M(n){z(n instanceof Function,"Expected a class definition");let e=ti.get(n);return e?(z(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ti.set(n,e),e)}var la=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return u(this,null,function*(){return!0})}_set(t,r){return u(this,null,function*(){this.storage[t]=r})}_get(t){return u(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return u(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),dn=la;function nt(n,e,t){return`firebase:${n}:${e}:${t}`}var ut=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=nt(this.userKey,i.apiKey,s),this.fullPersistenceKey=nt("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return u(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield at(this.auth,{idToken:e}).catch(()=>{});return t?j._fromGetAccountInfoResponse(this.auth,t,e):null}return j._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return u(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return u(this,null,function*(){if(!t.length)return new n(M(dn),e,r);let i=(yield Promise.all(t.map(l=>u(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||M(dn),o=nt(r,e.config.apiKey,e.name),c=null;for(let l of t)try{let h=yield l._get(o);if(h){let p;if(typeof h=="string"){let d=yield at(e,{idToken:h}).catch(()=>{});if(!d)break;p=yield j._fromGetAccountInfoResponse(e,d,h)}else p=j._fromJSON(e,h);l!==s&&(c=p),s=l;break}}catch{}let a=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new n(s,e,r):(s=a[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(l=>u(null,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function ni(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wi(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ei(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ai(e))return"Blackberry";if(ki(e))return"Webos";if(yi(e))return"Safari";if((e.includes("chrome/")||Ti(e))&&!e.includes("edge/"))return"Chrome";if(bi(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Ei(n=I()){return/firefox\//i.test(n)}function yi(n=I()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ti(n=I()){return/crios\//i.test(n)}function wi(n=I()){return/iemobile/i.test(n)}function bi(n=I()){return/android/i.test(n)}function Ai(n=I()){return/blackberry/i.test(n)}function ki(n=I()){return/webos/i.test(n)}function Nn(n=I()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function da(n=I()){var e;return Nn(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ha(){return Er()&&document.documentMode===10}function Si(n=I()){return Nn(n)||bi(n)||ki(n)||Ai(n)||/windows phone/i.test(n)||wi(n)}function Ri(n,e=[]){let t;switch(n){case"Browser":t=ni(I());break;case"Worker":t=`${ni(I())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fe}/${r}`}var hn=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let a=e(s);o(a)}catch(a){c(a)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return u(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function fa(t){return u(this,arguments,function*(n,e={}){return O(n,"GET","/v2/passwordPolicy",x(n,e))})}var pa=6,fn=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:pa,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(t=a.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(o=a.containsNumericCharacter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(c=a.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),a}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var pn=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lt(this),this.idTokenSubscription=new lt(this),this.beforeStateQueue=new hn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=M(t)),this._initializationPromise=this.queue(()=>u(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield ut.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return u(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return u(this,null,function*(){try{let t=yield at(this,{idToken:e}),r=yield j._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return u(this,null,function*(){var t;if(T(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===c)&&a?.user&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return f(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return u(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return u(this,null,function*(){try{yield ct(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Qo()}_delete(){return u(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return u(this,null,function*(){if(T(this.app))return Promise.reject(U(this));let t=e?y(e):null;return t&&f(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return u(this,null,function*(){if(!this._deleted)return e&&f(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>u(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return u(this,null,function*(){return T(this.app)?Promise.reject(U(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return T(this.app)?Promise.reject(U(this)):this.queue(()=>u(this,null,function*(){yield this.assertedPersistence.setPersistence(M(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return u(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return u(this,null,function*(){let e=yield fa(this),t=new fn(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new A("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return u(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield ua(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return u(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return u(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&M(e)||this._popupRedirectResolver;f(t,this,"argument-error"),this.redirectPersistenceManager=yield ut.create(this,[M(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return u(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>u(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return u(this,null,function*(){if(e===this.currentUser)return this.queue(()=>u(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(f(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let a=e.addObserver(t,r,i);return()=>{o=!0,a()}}else{let a=e.addObserver(t);return()=>{o=!0,a()}}}directlySetCurrentUser(e){return u(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return f(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ri(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return u(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return u(this,null,function*(){var e;if(T(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Yo(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function q(n){return y(n)}var lt=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=wr(t=>this.observer=t)}get next(){return f(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var It={loadJS(){return u(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ma(n){It=n}function Ci(n){return It.loadJS(n)}function ga(){return It.recaptchaEnterpriseScript}function _a(){return It.gapiScript}function Pi(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var mn=class{constructor(){this.enterprise=new gn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},gn=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var Ia="recaptcha-enterprise",Oi="NO_RECAPTCHA",_n=class{constructor(e){this.type=Ia,this.auth=q(e)}verify(e="verify",t=!1){return u(this,null,function*(){function r(s){return u(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>u(null,null,function*(){ia(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let l=new un(a);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(a=>{c(a)})}))})}function i(s,o,c){let a=window.grecaptcha;Qr(a)?a.enterprise.ready(()=>{a.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Oi)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mn().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(c=>{if(!t&&Qr(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let a=ga();a.length!==0&&(a+=c),Ci(a).then(()=>{i(c,s,o)}).catch(l=>{o(l)})}}).catch(c=>{o(c)})})})}};function Pe(n,e,t,r=!1,i=!1){return u(this,null,function*(){let s=new _n(n),o;if(i)o=Oi;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}let c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){let a=c.phoneEnrollmentInfo.phoneNumber,l=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){let a=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:a,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function dt(n,e,t,r,i){return u(this,null,function*(){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let c=yield Pe(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(c=>u(null,null,function*(){if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield Pe(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(c)}));else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let c=yield Pe(n,e,t);return r(n,c).catch(a=>u(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(a.code==="auth/missing-recaptcha-token"||a.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Pe(n,e,t,!1,!0);return r(n,h)}return Promise.reject(a)}))}else{let c=yield Pe(n,e,t,!1,!0);return r(n,c)}else return Promise.reject(i+" provider is not supported.")})}function Dn(n,e){let t=Ke(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(V(s,e??{}))return i;P(i,"already-initialized")}return t.initialize({options:e})}function va(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(M);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ln(n,e,t){let r=q(n);f(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Ni(e),{host:o,port:c}=Ea(e),a=c===null?"":`:${c}`,l={url:`${s}//${o}${a}/`},h=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){f(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),f(V(l,r.config.emulator)&&V(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Te(o)?(pr(`${s}//${o}${a}`),mr("Auth",!0)):i||ya()}function Ni(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Ea(n){let e=Ni(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:ri(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:ri(o)}}}function ri(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function ya(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Le=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return L("not implemented")}_getIdTokenResponse(e){return L("not implemented")}_linkToIdToken(e,t){return L("not implemented")}_getReauthenticationResolver(e){return L("not implemented")}};function Ta(n,e){return u(this,null,function*(){return O(n,"POST","/v1/accounts:signUp",e)})}function wa(n,e){return u(this,null,function*(){return xe(n,"POST","/v1/accounts:signInWithPassword",x(n,e))})}function ba(n,e){return u(this,null,function*(){return O(n,"POST","/v1/accounts:sendOobCode",x(n,e))})}function Aa(n,e){return u(this,null,function*(){return ba(n,e)})}function ka(n,e){return u(this,null,function*(){return xe(n,"POST","/v1/accounts:signInWithEmailLink",x(n,e))})}function Sa(n,e){return u(this,null,function*(){return xe(n,"POST","/v1/accounts:signInWithEmailLink",x(n,e))})}var Me=class n extends Le{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return u(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dt(e,t,"signInWithPassword",wa,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ka(e,{email:this._email,oobCode:this._password});default:P(e,"internal-error")}})}_linkToIdToken(e,t){return u(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dt(e,r,"signUpPassword",Ta,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Sa(e,{idToken:t,email:this._email,oobCode:this._password});default:P(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function sn(n,e){return u(this,null,function*(){return xe(n,"POST","/v1/accounts:signInWithIdp",x(n,e))})}function Ra(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ca(n){let e=de(he(n)).link,t=e?de(he(e)).deep_link_id:null,r=de(he(n)).deep_link_id;return(r?de(he(r)).link:null)||r||t||e||n}var ht=class n{constructor(e){var t,r,i,s,o,c;let a=de(he(e)),l=(t=a.apiKey)!==null&&t!==void 0?t:null,h=(r=a.oobCode)!==null&&r!==void 0?r:null,p=Ra((i=a.mode)!==null&&i!==void 0?i:null);f(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=a.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=a.lang)!==null&&o!==void 0?o:null,this.tenantId=(c=a.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=Ca(e);try{return new n(t)}catch{return null}}};var Di=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Me._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ht.parseLink(r);return f(i,"argument-error"),Me._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),ft=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var In=class extends ft{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Pa(n,e){return u(this,null,function*(){return xe(n,"POST","/v1/accounts:signUp",x(n,e))})}var Ie=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return u(this,null,function*(){let s=yield j._fromIdTokenResponse(e,r,i),o=ii(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return u(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=ii(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function ii(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var vn=class n extends b{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Li(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vn._fromErrorAndOperation(n,s,e,r):s})}function Oa(n,e,t=!1){return u(this,null,function*(){let r=yield _e(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ie._forOperation(n,"link",r)})}function Na(n,e,t=!1){return u(this,null,function*(){let{auth:r}=n;if(T(r.app))return Promise.reject(U(r));let i="reauthenticate";try{let s=yield _e(n,Li(r,i,e,n),t);f(s.idToken,r,"internal-error");let o=Pn(s.idToken);f(o,r,"internal-error");let{sub:c}=o;return f(n.uid===c,r,"user-mismatch"),Ie._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&P(r,"user-mismatch"),s}})}function Mi(n,e,t=!1){return u(this,null,function*(){if(T(n.app))return Promise.reject(U(n));let r="signIn",i=yield Li(n,r,e),s=yield Ie._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Mn(n,e){return u(this,null,function*(){return Mi(q(n),e)})}function Da(n,e,t){var r;f(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),f(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),f(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(f(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(f(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function Ui(n){return u(this,null,function*(){let e=q(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Un(n,e,t){return u(this,null,function*(){let r=q(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Da(r,i,t),yield dt(r,i,"getOobCode",Aa,"EMAIL_PASSWORD_PROVIDER")})}function xn(n,e,t){return u(this,null,function*(){if(T(n.app))return Promise.reject(U(n));let r=q(n),o=yield dt(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pa,"EMAIL_PASSWORD_PROVIDER").catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Ui(n),a}),c=yield Ie._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(c.user),c})}function Fn(n,e,t){return T(n.app)?Promise.reject(U(n)):Mn(y(n),Di.credential(e,t)).catch(r=>u(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Ui(n),r}))}function La(n,e){return u(this,null,function*(){return O(n,"POST","/v1/accounts:update",e)})}function Vn(r,i){return u(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=y(n),c={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=yield _e(s,La(s.auth,c));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;let l=s.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=s.displayName,l.photoURL=s.photoURL),yield s._updateTokensIfNecessary(a)})}function Wn(n,e,t,r){return y(n).onIdTokenChanged(e,t,r)}function $n(n,e,t){return y(n).beforeAuthStateChanged(e,t)}function Hn(n,e,t,r){return y(n).onAuthStateChanged(e,t,r)}function Bn(n){return y(n).signOut()}var pt="__sak";var mt=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pt,"1"),this.storage.removeItem(pt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Ma=1e3,Ua=10,xa=(()=>{class n extends mt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Si(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,a,l)=>{this.notifyListeners(c,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);ha()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Ua):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Ma)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return u(this,null,function*(){yield X(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return u(this,null,function*(){let r=yield X(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return u(this,null,function*(){yield X(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),xi=xa;var Fa=(()=>{class n extends mt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),jn=Fa;function Va(n){return Promise.all(n.map(e=>u(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Wa=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return u(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let a=Array.from(c).map(h=>u(this,null,function*(){return h(r.origin,o)})),l=yield Va(a);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Fi(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var En=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return u(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,a)=>{let l=Fi("",20);i.port1.start();let h=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let d=p;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(d.data.response);break;default:clearTimeout(h),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function C(){return window}function $a(n){C().location.href=n}function Vi(){return typeof C().WorkerGlobalScope<"u"&&typeof C().importScripts=="function"}function Ha(){return u(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Ba(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ja(){return Vi()?self:null}var Wi="firebaseLocalStorageDb",za=1,gt="firebaseLocalStorage",$i="fbase_key",oe=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function vt(n,e){return n.transaction([gt],e?"readwrite":"readonly").objectStore(gt)}function qa(){let n=indexedDB.deleteDatabase(Wi);return new oe(n).toPromise()}function yn(){let n=indexedDB.open(Wi,za);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(gt,{keyPath:$i})}catch(i){t(i)}}),n.addEventListener("success",()=>u(null,null,function*(){let r=n.result;r.objectStoreNames.contains(gt)?e(r):(r.close(),yield qa(),e(yield yn()))}))})}function si(n,e,t){return u(this,null,function*(){let r=vt(n,!0).put({[$i]:e,value:t});return new oe(r).toPromise()})}function Ga(n,e){return u(this,null,function*(){let t=vt(n,!1).get(e),r=yield new oe(t).toPromise();return r===void 0?null:r.value})}function oi(n,e){let t=vt(n,!0).delete(e);return new oe(t).toPromise()}var Ka=800,Ja=3,Ya=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return u(this,null,function*(){return this.db?this.db:(this.db=yield yn(),this.db)})}_withRetries(t){return u(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Ja)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return u(this,null,function*(){return Vi()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return u(this,null,function*(){this.receiver=Wa._getInstance(ja()),this.receiver._subscribe("keyChanged",(t,r)=>u(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>u(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return u(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Ha(),!this.activeServiceWorker)return;this.sender=new En(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return u(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Ba()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return u(this,null,function*(){try{if(!indexedDB)return!1;let t=yield yn();return yield si(t,pt,"1"),yield oi(t,pt),!0}catch{}return!1})}_withPendingWrite(t){return u(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return u(this,null,function*(){return this._withPendingWrite(()=>u(this,null,function*(){return yield this._withRetries(i=>si(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return u(this,null,function*(){let r=yield this._withRetries(i=>Ga(i,t));return this.localCache[t]=r,r})}_remove(t){return u(this,null,function*(){return this._withPendingWrite(()=>u(this,null,function*(){return yield this._withRetries(r=>oi(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return u(this,null,function*(){let t=yield this._withRetries(s=>{let o=vt(s,!1).getAll();return new oe(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>u(this,null,function*(){return this._poll()}),Ka)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Hi=Ya;var od=Pi("rcb"),ad=new se(3e4,6e4);function Xa(n,e){return e?M(e):(f(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ue=class extends Le{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sn(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Za(n){return Mi(n.auth,new Ue(n),n.bypassAuthState)}function Qa(n){let{auth:e,user:t}=n;return f(t,e,"internal-error"),Na(t,new Ue(n),n.bypassAuthState)}function ec(n){return u(this,null,function*(){let{auth:e,user:t}=n;return f(t,e,"internal-error"),Oa(t,new Ue(n),n.bypassAuthState)})}var Tn=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>u(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return u(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let a={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(a))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Za;case"linkViaPopup":case"linkViaRedirect":return ec;case"reauthViaPopup":case"reauthViaRedirect":return Qa;default:P(this.auth,"internal-error")}}resolve(e){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var cd=new se(2e3,1e4);var tc="pendingRedirect",rt=new Map,wn=class n extends Tn{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return u(this,null,function*(){let e=rt.get(this.auth._key());if(!e){try{let r=(yield nc(this.resolver,this.auth))?yield X(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}rt.set(this.auth._key(),e)}return this.bypassAuthState||rt.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return u(this,null,function*(){if(e.type==="signInViaRedirect")return X(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,X(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return u(this,null,function*(){})}cleanUp(){}};function nc(n,e){return u(this,null,function*(){let t=sc(e),r=ic(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function rc(n,e){rt.set(n._key(),e)}function ic(n){return M(n._redirectPersistence)}function sc(n){return nt(tc,n.config.apiKey,n.name)}function oc(n,e,t=!1){return u(this,null,function*(){if(T(n.app))return Promise.reject(U(n));let r=q(n),i=Xa(r,e),o=yield new wn(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var ac=600*1e3,bn=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cc(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Bi(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ie(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ac&&this.cachedEventUids.clear(),this.cachedEventUids.has(ai(e))}saveEventToCache(e){this.cachedEventUids.add(ai(e)),this.lastProcessedEventTime=Date.now()}};function ai(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Bi({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function cc(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bi(n);default:return!1}}function uc(t){return u(this,arguments,function*(n,e={}){return O(n,"GET","/v1/projects",e)})}var lc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dc=/^https?/;function hc(n){return u(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield uc(n);for(let t of e)try{if(fc(t))return}catch{}P(n,"unauthorized-domain")})}function fc(n){let e=an(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!dc.test(t))return!1;if(lc.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var pc=new se(3e4,6e4);function ci(){let n=C().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function mc(n){return new Promise((e,t)=>{var r,i,s;function o(){ci(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ci(),t(ie(n,"network-request-failed"))},timeout:pc.get()})}if(!((i=(r=C().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=C().gapi)===null||s===void 0)&&s.load)o();else{let c=Pi("iframefcb");return C()[c]=()=>{gapi.load?o():t(ie(n,"network-request-failed"))},Ci(`${_a()}?onload=${c}`).catch(a=>t(a))}}).catch(e=>{throw it=null,e})}var it=null;function gc(n){return it=it||mc(n),it}var _c=new se(5e3,15e3),Ic="__/auth/iframe",vc="emulator/auth/iframe",Ec={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tc(n){let e=n.config;f(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Rn(e,vc):`https://${n.config.authDomain}/${Ic}`,r={apiKey:e.apiKey,appName:n.name,v:fe},i=yc.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${we(r).slice(1)}`}function wc(n){return u(this,null,function*(){let e=yield gc(n),t=C().gapi;return f(t,n,"internal-error"),e.open({where:document.body,url:Tc(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ec,dontclear:!0},r=>new Promise((i,s)=>u(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ie(n,"network-request-failed"),c=C().setTimeout(()=>{s(o)},_c.get());function a(){C().clearTimeout(c),i(r)}r.ping(a).then(a,()=>{s(o)})})))})}var bc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ac=500,kc=600,Sc="_blank",Rc="http://localhost",_t=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Cc(n,e,t,r=Ac,i=kc){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",a=Object.assign(Object.assign({},bc),{width:r.toString(),height:i.toString(),top:s,left:o}),l=I().toLowerCase();t&&(c=Ti(l)?Sc:t),Ei(l)&&(e=e||Rc,a.scrollbars="yes");let h=Object.entries(a).reduce((d,[m,w])=>`${d}${m}=${w},`,"");if(da(l)&&c!=="_self")return Pc(e||"",c),new _t(null);let p=window.open(e||"",c,h);f(p,n,"popup-blocked");try{p.focus()}catch{}return new _t(p)}function Pc(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Oc="__/auth/handler",Nc="emulator/auth/handler",Dc=encodeURIComponent("fac");function ui(n,e,t,r,i,s){return u(this,null,function*(){f(n.config.authDomain,n,"auth-domain-config-required"),f(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:fe,eventId:i};if(e instanceof ft){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Tr(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof In){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let a=yield n._getAppCheckToken(),l=a?`#${Dc}=${encodeURIComponent(a)}`:"";return`${Lc(n)}?${we(c).slice(1)}${l}`})}function Lc({config:n}){return n.emulator?Rn(n,Nc):`https://${n.authDomain}/${Oc}`}var on="webStorageSupport",An=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jn,this._completeRedirectFn=oc,this._overrideRedirectResult=rc}_openPopup(e,t,r,i){return u(this,null,function*(){var s;z((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield ui(e,t,r,an(),i);return Cc(e,o,Fi())})}_openRedirect(e,t,r,i){return u(this,null,function*(){yield this._originValidation(e);let s=yield ui(e,t,r,an(),i);return $a(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(z(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return u(this,null,function*(){let t=yield wc(e),r=new bn(e);return t.register("authEvent",i=>(f(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(on,{type:on},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[on];o!==void 0&&t(!!o),P(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hc(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Si()||yi()||Nn()}},ji=An;var li="@firebase/auth",di="1.10.8";var kn=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return u(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){f(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Mc(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Uc(n){D(new v("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;f(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let a={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ri(n)},l=new pn(r,i,s,a);return va(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),D(new v("auth-internal",e=>{let t=q(e.getProvider("auth").getImmediate());return(r=>new kn(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_(li,di,Mc(n)),_(li,di,"esm2017")}var xc=300,Fc=Dt("authIdTokenMaxAge")||xc,hi=null,Vc=n=>e=>u(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Fc)return;let i=t?.token;hi!==i&&(hi=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function zn(n=ke()){let e=Ke(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Dn(n,{popupRedirectResolver:ji,persistence:[Hi,xi,jn]}),r=Dt("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Vc(s.toString());$n(t,o,()=>o(t.currentUser)),Wn(t,c=>o(c))}}let i=fr("auth");return i&&Ln(t,`http://${i}`),t}function Wc(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ma({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ie("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Wc().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Uc("Browser");var zi="auth",ae=class{constructor(e){return e}},qn=class{constructor(){return Xe(zi)}};var Gn=new Ve("angularfire2.auth-instances");function ku(n,e){let t=Jt(zi,n,e);return t&&new ae(t)}function Su(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ae(r)}}var Ru={provide:qn,deps:[[new Q,Gn]]},Cu={provide:ae,useFactory:ku,deps:[[new Q,Gn],re]};function Kd(n,...e){return _("angularfire",me.full,"auth"),We([Cu,Ru,{provide:Gn,useFactory:Su(n),multi:!0,deps:[F,le,ge,Se,[new Q,Qe],...e]}])}var qi=k(xn,!0,2);var Jd=k(zn,!0);var Gi=k(Hn,!0);var Yd=k(Un,!0,2);var Ki=k(Fn,!0,2);var Ji=k(Bn,!0,2);var Yi=k(Vn,!0,2);var Xi=class n{constructor(e){this.http=e}baseUrl="https://api.open-meteo.com/v1/forecast";geoUrl="https://geocoding-api.open-meteo.com/v1/search";getWeatherByCoords(e,t){let r=[`latitude=${e}`,`longitude=${t}`,"current=temperature_2m,apparent_temperature,relative_humidity_2m,weathercode,wind_speed_10m,surface_pressure","hourly=temperature_2m,weathercode,pressure_msl","daily=temperature_2m_max,temperature_2m_min,uv_index_max,precipitation_probability_max,sunrise,sunset,weathercode","forecast_days=10","timezone=auto"].join("&");return this.http.get(`${this.baseUrl}?${r}`)}getWeather(e){return new Z(t=>{fetch(`${this.geoUrl}?name=${e}`).then(r=>r.json()).then(r=>{if(!r.results?.length)throw new Error("City not found");let{latitude:i,longitude:s,name:o,country:c}=r.results[0];this.getWeatherByCoords(i,s).subscribe({next:a=>t.next(Y(J({},a),{name:o,country:c})),error:a=>t.error(a)})}).catch(r=>t.error(r))})}getMultipleCities(e){let t=e.map(r=>this.http.get(`${this.baseUrl}?latitude=${r.lat}&longitude=${r.lon}&current=temperature_2m,weathercode&timezone=auto`).pipe(Zn(i=>({name:r.name,temp:i.current.temperature_2m,code:i.current.weathercode}))));return Qn(t)}static \u0275fac=function(t){return new(t||n)(nr(or))};static \u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"})};var Zi=class n{auth=E(ae);router=E(ar);userSignal=At(null);displayName=sr(()=>this.userSignal()?.displayName||this.userSignal()?.email?.split("@")[0]||"Guest");constructor(){Gi(this.auth,e=>this.userSignal.set(e))}login(e,t){return Ki(this.auth,e,t)}signup(e,t,r){return u(this,null,function*(){let i=yield qi(this.auth,e,t);return r&&(yield Yi(i.user,{displayName:r}),this.userSignal.set(Y(J({},i.user),{displayName:r}))),i})}isLoggedIn(){return this.userSignal()!==null}logout(){return u(this,null,function*(){yield Ji(this.auth),this.userSignal.set(null),this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ue({token:n,factory:n.\u0275fac,providedIn:"root"})};export{Cl as a,Pl as b,Hn as c,Bn as d,ae as e,Kd as f,qi as g,Jd as h,Gi as i,Yd as j,Ki as k,Yi as l,Xi as m,Zi as n};
